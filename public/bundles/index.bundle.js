!function(e){function t(t){for(var r,s,i=t[0],l=t[1],c=t[2],d=0,p=[];d<i.length;d++)s=i[d],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&p.push(a[s][0]),a[s]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);for(u&&u(t);p.length;)p.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,i=1;i<n.length;i++){var l=n[i];0!==a[l]&&(r=!1)}r&&(o.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},a={4:0},o=[];function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n=a[e];if(0!==n)if(n)t.push(n[2]);else{var r=new Promise((function(t,r){n=a[e]=[t,r]}));t.push(n[2]=r);var o,i=document.createElement("script");i.charset="utf-8",i.timeout=120,s.nc&&i.setAttribute("nonce",s.nc),i.src=function(e){return s.p+""+({}[e]||e)+".bundle.js"}(e);var l=new Error;o=function(t){i.onerror=i.onload=null,clearTimeout(c);var n=a[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+r+": "+o+")",l.name="ChunkLoadError",l.type=r,l.request=o,n[1](l)}a[e]=void 0}};var c=setTimeout((function(){o({type:"timeout",target:i})}),12e4);i.onerror=i.onload=o,document.head.appendChild(i)}return Promise.all(t)},s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="bundles/",s.oe=function(e){throw console.error(e),e};var i=window.webpackJsonp=window.webpackJsonp||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var u=l;o.push([270,5]),n()}({124:function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return i}));var r=n(18);const a=e=>({type:r.j,payload:{clientInfo:e}}),o=e=>({type:r.a,payload:{authToken:e}}),s=e=>({type:r.e,payload:{...e}}),i=e=>({type:r.h,payload:{...e}})},131:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(14);class s extends r.PureComponent{constructor(e){super(e),this.state={}}render(){const{classes:e}=this.props;return a.a.createElement("div",null,"Loading...")}}t.a=Object(o.a)(e=>({root:{}}))(s)},18:function(e,t,n){"use strict";n.d(t,"g",(function(){return r})),n.d(t,"i",(function(){return a})),n.d(t,"l",(function(){return o})),n.d(t,"a",(function(){return s})),n.d(t,"j",(function(){return i})),n.d(t,"b",(function(){return l})),n.d(t,"f",(function(){return c})),n.d(t,"s",(function(){return u})),n.d(t,"o",(function(){return d})),n.d(t,"q",(function(){return p})),n.d(t,"p",(function(){return m})),n.d(t,"n",(function(){return f})),n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){return E})),n.d(t,"r",(function(){return y})),n.d(t,"k",(function(){return b})),n.d(t,"m",(function(){return T})),n.d(t,"e",(function(){return g})),n.d(t,"h",(function(){return S})),n.d(t,"t",(function(){return _}));const r="RECEIVE_MESSAGE",a="SEND_MESSAGE",o="UPDATE_MESSAGES",s="AUTHENTICATE",i="UPDATE_CLIENT_INFO",l="CHANGE_USERNAME",c="RECEIVE_ACCOUNT_MAP",u="UPDATE_SETTINGS",d="UPDATE_PLAYER_CONTROL_QUEUES",p="UPDATE_PLAYER_TURN_START_TIMES",m="UPDATE_PLAYER_TURN_LENGTHS",f="UPDATE_PLAYER_CONTROLLER_STATE",h="JOIN_PLAYER_CONTROL_QUEUE",E="LEAVE_PLAYER_CONTROL_QUEUE",y="UPDATE_SERVER_TIME",b="UPDATE_LAST_SERVER_UPDATE",T="UPDATE_PING",g="LOGIN",S="REGISTER",_="UPDATE_STREAM_INFO"},202:function(e,t){},270:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(22),s=n.n(o),i=n(9),l=n(130),c=n(292),u=n(290),d=n(67),p=n(104),m=n(131),f=n(92),h=n(71),E=n(10),y=n(293);var b=(e={},t)=>{switch(t.type){case"ADD_MESSAGE":case"RECEIVE_MESSAGE":setTimeout(()=>{window.dispatchEvent(new Event("resize"))},1e3);let n=e.messages.concat([{id:t.payload.id,userid:t.payload.userid,username:t.payload.username,text:t.payload.text,time:t.payload.time,isReplay:t.payload.isReplay,isBanned:t.payload.isBanned}]),r=e.userids.splice(0);return-1==r.indexOf(t.payload.userid)&&r.push(t.payload.userid),t.payload.pinged,{...e,userids:r,messages:n};case"UPDATE_MESSAGES":return{...e,messages:t.payload.messages};default:return e}},T=n(135);var g=(e={},t)=>Object(T.a)(e,e=>{switch(t.type){case"UPDATE_PLAYER_TURN_START_TIMES":for(let n=0;n<e.turnTimers.length;n++)null!=t.payload.turnStartTimes&&(e.turnTimers[n].turnStartTime=t.payload.turnStartTimes[n]),null!=t.payload.forfeitStartTimes&&(e.turnTimers[n].forfeitStartTime=t.payload.forfeitStartTimes[n]);return;case"UPDATE_PLAYER_TURN_LENGTHS":for(let n=0;n<e.turnTimers.length;n++)e.turnTimers[n].turnLength=t.payload.turnLengths[n],e.turnTimers[n].forfeitLength=t.payload.forfeitLengths[n];return;case"UPDATE_PLAYER_CONTROL_QUEUES":return void(e.controlQueues=t.payload.queues);case"UPDATE_PLAYER_CONTROLLER_STATE":return e.controllerStates[t.payload.cNum].btns=t.payload.btns,void(e.controllerStates[t.payload.cNum].axes=t.payload.axes)}});var S=(e={},t)=>{switch(t.type){case"UPDATE_SERVER_TIME":return Object.assign({...e},{server:t.payload.time,lastServerUpdate:Date.now()});case"UPDATE_PING":return Object.assign({...e},{ping:t.payload.time});default:return e}};var _=(e={},t)=>{switch(t.type){case"RECEIVE_ACCOUNT_MAP":return t.payload.map;default:return e}};var O=(e=[],t)=>{switch(t.type){case"UPDATE_WAITLIST":return t.payload.waitlist;default:return e}};var A=(e={},t)=>{switch(t.type){case"UPDATE_STREAM_INFO":return t.payload.data;default:return e}};var v=Object(E.combineReducers)({chat:b,players:g,time:S,accountMap:_,waitlist:O,info:A});var P=(e=[],t)=>{switch(t.type){case"RECEIVE_STREAMS":return data.payload.streams;default:return e}};var w=Object(E.combineReducers)({streamList:P});var R=(e={},t)=>{switch(t.type){case"UPDATE_SETTINGS":let n={...t.payload.settings};return Object.keys(n).forEach(e=>void 0===n[e]&&delete n[e]),{...e,...n};default:return e}},U=n(52);var j=Object(E.combineReducers)({stream:v,streams:w,client:U.a,settings:R,form:y.a}),I=n(94),N=n(124),C=n(138),L=n(50),k=n(18);var D=e=>{let t=[];return t.push(Object(L.b)(k.e,t=>{e.socket.emit("login",{...t.payload,socketid:e.socket.id},e=>{t.payload.cb&&t.payload.cb(e)})})),t.push(Object(L.b)(k.h,t=>{e.socket.emit("register",{...t.payload},e=>{t.payload.cb&&t.payload.cb(e)})})),t};var M=function*(e){let t=[];t=t.concat(D(e)),yield Object(L.a)(t)},x=n(40),G=n.n(x),V=n(88),Y=n.n(V);var z=(e,t)=>(function(e,t){let n=Y.a.get("RemoteGames");n&&e.emit("getAccountInfo",{authToken:n,usernameIndex:0},e=>{console.log(e),e.success?t(Object(U.b)({...e.clientInfo,authToken:n,loggedIn:!0})):(console.log(`AUTHENTICATION_FAILURE: ${e.reason}`),"ACCOUNT_NOT_FOUND"===e.reason&&(Y.a.remove("RemoteGames"),t(Object(U.b)({authToken:null}))))})}(e,t),e.on("banned",e=>{G.a.setItem("banned","banned")}),e);var Q=(e,t)=>e=z(e,t),F=n(98),H=n.n(F);function J(){return(J=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const B=Object(r.lazy)(()=>Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(6)]).then(n.bind(null,541))),q=Object(r.lazy)(()=>Promise.all([n.e(0),n.e(1),n.e(2),n.e(11)]).then(n.bind(null,554))),K=Object(r.lazy)(()=>Promise.all([n.e(0),n.e(12)]).then(n.bind(null,532))),W=Object(r.lazy)(()=>Promise.all([n.e(0),n.e(10)]).then(n.bind(null,533))),$=Object(r.lazy)(()=>Promise.all([n.e(0),n.e(16)]).then(n.bind(null,534))),X=Object(r.lazy)(()=>Promise.all([n.e(0),n.e(15)]).then(n.bind(null,535))),Z=Object(r.lazy)(()=>Promise.all([n.e(0),n.e(1),n.e(9),n.e(14)]).then(n.bind(null,549))),ee=Object(r.lazy)(()=>Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(7)]).then(n.bind(null,540))),te=Object(C.a)();let ne={stream:{info:{streamType:"mpeg2"},chat:{messages:[],userids:[]},players:{controlQueues:[],turnTimers:[],controllerStates:[],count:8},time:{server:0,lastServerUpdate:0,ping:0},accountMap:{},waitlist:[]},streams:{streamList:[]},client:{authToken:null,loggedIn:!1,hostAuthed:!1,userid:null,username:"???",connectedAccounts:[],validUsernames:[],usernameIndex:0,waitlisted:!1,timePlayed:0,emailVerified:!1,roles:{}},settings:{keyboardControls:!0,controllerControls:!0,mouseControls:!1,touchControls:!1,mobileMode:!1,realKeyboardMouse:!1,controllerView:!0,fullscreen:!1,largescreen:!1,hideChat:!1,hideNav:!1,audioThree:!1,analogStickMode:!1,dpadSwap:!1,TDSConfig:!1,currentPlayer:0,volume:0,theme:"dark"},form:{}};for(let e=0;e<ne.stream.players.count;e++)ne.stream.players.turnTimers.push({turnStartTime:0,forfeitStartTime:0,turnLength:0,forfeitLength:0}),ne.stream.players.controlQueues.push([]),ne.stream.players.controllerStates.push({btns:0,axes:[0,0,0,0,0,0]});G.a.getItem("settings").then(e=>{let t={};e&&(t=Object.assign({},JSON.parse(e)),t.currentPlayer=0,t.largescreen=!1,t.fullscreen=!1,t.mobileMode=!1,t.hideChat=!1,t.hideNav=!1),re.dispatch(Object(I.a)({...t})),G.a.getItem("banned").then(e=>{e?(re.dispatch(Object(N.d)({isBanned:!0})),window.banned=!0):window.banned=!1})});const re=Object(h.a)({reducer:j,preloadedState:ne,middleware:[te]});window.onbeforeunload=()=>(console.log("saving settings"),G.a.setItem("settings",JSON.stringify(re.getState().settings)),null);let ae=H()("https://remotegames.io",{path:"/8099/socket.io",transports:["polling","websocket","xhr-polling","jsonp-polling"]});Q(ae,re.dispatch),te.run(M,{socket:ae,dispatch:re.dispatch});class oe extends r.Component{constructor(e){super(e),this.state={theme:Object(d.a)({})},this.switchTheme=this.switchTheme.bind(this);let t=null;re.subscribe(()=>{let e=t;t=re.getState().settings.theme,e!==t&&(console.log("theme changed"),this.switchTheme(t),this.setState({}))})}componentDidMount(){}switchTheme(e){let t={};switch(e){case"light":t={palette:{type:"light",primary:{main:"#2181ff"},secondary:{main:"#ff3b3b"},background:{paper:"#fafafa"}}};break;case"dark":t={palette:{type:"dark",primary:{main:"#2181ff"},secondary:{main:"#ff3b3b"},background:{paper:"#424242"}}};break;case"spooky":t={palette:{type:"dark",primary:{main:"#ff7930"},secondary:{main:"#000"},background:{paper:"#2f2f2f"}}}}this.setState({theme:Object(d.a)(t)})}shouldComponentUpdate(e,t){return!0}render(){return console.log("re-rendering index"),/^\/download/.test(window.location.pathname)&&(window.location.href="https://remotegames.io/8099/download/",window.history.replaceState("","","/")),a.a.createElement(f.a,{store:re},a.a.createElement(u.a,{theme:this.state.theme},a.a.createElement(p.SnackbarProvider,{maxSnack:3},a.a.createElement(c.a,null),a.a.createElement(l.a,null,a.a.createElement(r.Suspense,{fallback:a.a.createElement(m.a,null)},a.a.createElement(i.c,null,a.a.createElement(i.a,{path:"/about",render:e=>a.a.createElement(K,e)}),a.a.createElement(i.a,{path:"/FAQ",render:e=>a.a.createElement(W,e)}),a.a.createElement(i.a,{path:"/privacy",render:e=>a.a.createElement(X,e)}),a.a.createElement(i.a,{path:"/tos",render:e=>a.a.createElement($,e)}),a.a.createElement(i.a,{path:"/(login|register)",render:e=>a.a.createElement(B,J({},e,{history:this.props.history}))}),a.a.createElement(i.a,{path:"/account",render:e=>a.a.createElement(q,J({},e,{history:this.props.history}))}),a.a.createElement(i.a,{path:"/(s|controls|settings)/:username?",render:e=>a.a.createElement(ee,J({},e,{store:re,sagaMiddleware:te,accountConnection:ae}))}),a.a.createElement(i.a,{path:"/",render:e=>a.a.createElement(Z,J({},e,{store:re,accountConnection:ae,sagaMiddleware:te}))})))))))}}t.default=oe;s.a.render(a.a.createElement(oe,null),document.getElementById("root"))},52:function(e,t,n){"use strict";n.d(t,"b",(function(){return s}));var r=n(71);const a=Object(r.b)({name:"client",initialState:{},reducers:{changeUsernameIndex:(e,t)=>(e.usernameIndex=t.payload.usernameIndex,e),updateClient:(e,t)=>({...e,...t.payload})}}),{changeUsernameIndex:o,updateClient:s}=a.actions;t.a=a.reducer},94:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(18);const a=e=>({type:r.s,payload:{settings:e}})}});